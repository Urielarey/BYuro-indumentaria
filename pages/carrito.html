<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Carrito de Compras</title>
      <link rel="icon" type="Byuro.png" href="../assets/Byuro3.PNG">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
</head>
<body>
      <header>
      <article class="u-envios">
        <h6>Envio a todo el pais üöö</h6>
      </article>
      <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="../index.html">BYuro Indumentaria</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="../index.html">Inicio</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="contacto.html">Contacto</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="sucursales.html">Sucursales</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Catalogo
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="remeras.html">Remeras</a></li>
                  <li><a class="dropdown-item" href="buzos.html">Buzos y Camperas</a></li>
                  <li><a class="dropdown-item" href="short.html">Pantalones y Shorts</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="ayuda.html">Ayuda</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="carrito.html">Carrito üõí</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <main>
            <section class="logo">
        <img src="../assets/BYURO2.png" alt="byuroLogo">
      </section>
      <section class="carrito" data-aos="fade-up">
        <h2 class="h2">CARRITO</h2>
        <div id="carrito-container"></div>
        <h3>Total: $<span id="total">0</span></h3>
        <button class="button" onclick="vaciarCarrito()">Vaciar carrito</button>
        <a id="mail-btn" target="_blank">
        <button class="button">Enviar pedido por Email</button>
        </a>
      </section>
    </main>
        <footer>
      <section class="publi">
        <p>Powered by: <a class="sin-decoracion" href="https://www.byurodev.site" target="_blank">byurodev.site</a></p>
        <p>&copy;BYuro - Todos los derechos reservados</p>
      </section>
    </footer>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
  <script>
    let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

    const contenedor = document.getElementById('carrito-container');
    const totalEl = document.getElementById('total');

    function renderizarCarrito() {
      contenedor.innerHTML = '';
      let total = 0;

        totalEl.textContent = total;
  actualizarBotonEmail(); // ‚Üê actualiza el enlace mailto


      carrito.forEach((producto, index) => {
        total += producto.precio;

        const div = document.createElement('div');
        div.classList.add('carrito-item');
        div.innerHTML = `
          <span>${producto.nombre} - $${producto.precio}</span>
          <button class="button" onclick="eliminarProducto(${index})">Eliminar</button>
        `;
        contenedor.appendChild(div);
      });

      totalEl.textContent = total;
    }

    function eliminarProducto(index) {
      carrito.splice(index, 1);
      localStorage.setItem('carrito', JSON.stringify(carrito));
      renderizarCarrito();
    }

    function vaciarCarrito() {
      if (confirm("¬øEst√°s seguro de que quer√©s vaciar el carrito?")) {
        carrito = [];
        localStorage.removeItem('carrito');
        renderizarCarrito();
      }
    }
          function generarMensajeEmail() {
        if (carrito.length === 0) return '';

        let mensaje = 'Hola! Quiero hacer este pedido:%0D%0A%0D%0A';
        let total = 0;

        carrito.forEach(item => {
          mensaje += `‚Ä¢ ${item.nombre} - $${item.precio}%0D%0A`;
          total += item.precio;
        });

        mensaje += `%0D%0ATotal: $${total}`;
        return mensaje;
      }

      function actualizarBotonEmail() {
        const link = document.getElementById('mail-btn');
        const asunto = encodeURIComponent('Pedido desde la tienda BYuro');
        const mensaje = generarMensajeEmail();
        const destino = 'contact.byuro@gmail.com'; // ‚Üê reemplaz√° por tu mail

        link.href = `mailto:${destino}?subject=${asunto}&body=${mensaje}`;
      }
    renderizarCarrito();
  </script>
</body>
</html>
